<?xml version="1.0" encoding="ISO-8859-1" ?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	template="/WEB-INF/templates/template.xhtml">

	<ui:define name="contenu">
		<p:remoteCommand name="update" onstart="console.log('start')"
			update="container" process="container" />

		<p:fieldset id="container" legend="PrimeChat" toggleable="true">

			<h:panelGroup rendered="#{teamViewBean.loggedIn}">
				<h:panelGrid columns="2" style="width:100%">
					<p:dataList id="teams" var="team"
						value="#{auctionsBean.getTeams('asta')}">
						<f:facet name="header">
							<h:outputLabel value="Teams" />
						</f:facet>
                    #{team.name}
                </p:dataList>
				</h:panelGrid>

				<p:separator />

				<h:panelGrid rendered="#{teamViewBean.player != null}" columns="2"
					style="width:100%">
					<h:outputLabel value="#{teamViewBean.player.surname}" />
					<p:dataList id="bids" var="bid" value="#{teamViewBean.getBids()}">
						<f:facet name="header">
							<h:outputLabel value="Bids" />
						</f:facet>
	                    #{bid.value}
	                </p:dataList>
					
					<h:panelGrid>
						<p:poll interval="5"  listener="#{counterView.increment}"
							update="txt_count" />
					</h:panelGrid>
				</h:panelGrid>

				<p:separator />

				<p:inputText value="#{teamViewBean.bid}" />
				<p:spacer width="5" />
				<p:commandButton value="Send" action="#{teamViewBean.sendBid}" />
				<p:commandButton value="Start"
					disabled="#{teamViewBean.player != null}"
					action="#{teamViewBean.startAuction}" />
				<p:commandButton value="End"
					rendered="#{teamViewBean.player != null}"
					action="#{teamViewBean.endAuction}" />
				<p:spacer width="5" />
				<p:commandButton value="Disconnect"
					actionListener="#{teamViewBean.disconnect}" global="false"
					update="container" />
			</h:panelGroup>

			<h:panelGroup rendered="#{not teamViewBean.loggedIn}">
            Team: <p:inputText value="#{teamViewBean.teamName}" />

				<p:spacer width="5" />
				<p:commandButton value="Login"
					action="#{teamViewBean.login(auctionsBean.getLeague('asta'))}"
					update="container" icon="ui-icon-person" />
			</h:panelGroup>

		</p:fieldset>

	</ui:define>

</ui:composition>